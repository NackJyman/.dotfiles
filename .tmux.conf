# Josh's Ultimate tmux Config  - 2/15/2020

# General #

# 256 colors with italics.
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ',xterm*:sitm=\E[3m:Tc'

# Reload ~/.tmux.conf using PREFIX r
bind r source-file ~/.tmux.conf \; display "Reloaded!"

# 10k scrollback history.
set -g history-limit 10000

# Shorten command delay.
set -sg escape-time 1

# | to split horizontally
# - to split vertically
bind | split-window -h
bind - split-window -v

# Make the current window the first window
bind T swap-window -t 0

# Select Vim Binds
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize Vim Binds
bind H resize-pane -L 5
bind J resize-pane -D 5
bind K resize-pane -U 5
bind L resize-pane -R 5

# Use C-h and C-l to cycle thru panes
bind -r C-h select-window -t :-
bind -r C-l select-window -t :+

# Mouse #

# Changed in tmux 2.1
set -g mouse on

bind-key -n WheelUpPane \
if-shell -Ft= "#{?pane_in_mode,1,#{mouse_button_flag}}" \
"send-keys -Mt=; send-keys -Mt=; send-keys -Mt=" \
"if-shell -Ft= '#{alternate_on}' \
'send-keys -t= Up Up Up' \
'copy-mode -et='"

bind-key -n WheelDownPane \
if-shell -Ft= "#{?pane_in_mode,1,#{mouse_button_flag,1,#{?alternate_on,0,1}}}" \
"send-keys -Mt=; send-keys -Mt=; send-keys -Mt=" \
"send-keys -t= Down Down Down"

bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'select-pane -t=; copy-mode -e; send-keys -M'"
bind -n WheelDownPane select-pane -t= \; send-keys -M
bind -n C-WheelUpPane select-pane -t= \; copy-mode -e \; send-keys -M

bind-key -T root WheelUpPane if-shell -F -t = "#{alternate_on}" "send-keys -M" "select-pane -t =; copy-mode -e; send-keys -M"
bind-key -T root WheelDownPane if-shell -F -t = "#{alternate_on}" "send-keys -M" "select-pane -t =; send-keys -M"

# Pretty Colors #

# Set pane colors - Hilight the active pane
set-option -g pane-border-style fg="colour235"
set-option -g pane-active-border-style fg="colour240"

# Colorize messages in the command line
set-option -g message-style fg="brightred",bg="black"

set-window-option -g pane-active-border-style ''

# Status Bar #

# Enable status bar.
set-option -g status on
# Set update frequencey (default 15 seconds)
set -g status-interval 5
# Center window list for clarity
set -g status-justify centre
# Position the status bar at top of screen
set-option -g status-position top

# Visual notification of activity in other windows
setw -g monitor-activity off
set -g visual-activity off

# Set color for status bar
set-option -g status-bg colour235
set-option -g status-fg yellow

set-option -g status-style "dim"

# Set window list colors - red for active and cyan for inactive
set-window-option -g window-status-style "dim",fg="yellow",bg="colour235"
set-window-option -g window-status-current-style "bright",fg="brightred",bg="colour236"

# Show host name and IP address on left side of status bar
set -g status-left-length 70
set -g status-left "#[fg=green]: #h : #[fg=brightblue]#(curl icanhazip.com) #[fg=yellow]#(ifconfig en0 | grep 'inet ' | awk '{print \"en0 \" $2}') #(ifconfig en1 | grep 'inet ' | awk '{print \"en1 \" $2}') #[fg=red]#(ifconfig tun0 | grep 'inet ' | awk '{print \"vpn \" $2}') "
set -g status-left "#h : #(ifconfig en0 | grep 'inet ' | awk '{print \"en0 \" $2}') #(ifconfig en1 | grep 'inet ' | awk '{print \"en1 \" $2}')"

# Show session name, window & pane number, date and time on right side
set -g status-right-length 60
set -g status-right "#[fg=blue]#S #I:#P #[fg=yellow]:: %d %b %Y #[fg=green]:: %l:%M %p :: #(date -u | awk '{print $4}')::"
set -g status-right "%d %b %Y :: %l:%M %p "

set -g status "on"
set -g status-justify "left"
set -g status-left-length "100"
set -g status-right-length "100"

set -g status-right-style "none",bg="colour237"
set -g status-style "none"
set -g status-left-style "none"
set -g pane-active-border-style fg="colour248"
set -g pane-border-style fg="colour238"
set -g message-style fg="colour237",bg="colour248"
set -g message-command-style fg="colour237",bg="colour248"
set -g window-status-style "none",fg="colour237",bg="colour214"
set -g window-status-activity-style "none",fg="colour248",bg="colour237"
setw -g window-status-separator ""


set -g status-left "#[fg=colour248,bg=colour241] #S #[fg=colour241,bg=colour237,nobold,nounderscore,noitalics]"
set -g status-right "#[fg=colour239,bg=colour237,nobold,nounderscore,noitalics]#[fg=colour246,bg=colour239] %Y-%m-%d  %H:%M #[fg=colour248,bg=colour239,nobold,nounderscore,noitalics]#[fg=colour237,bg=colour248] #h "
setw -g window-status-format "#[fg=colour237,bg=colour239,noitalics]#[fg=colour223,bg=colour239] #I #[fg=colour223,bg=colour239] #W #[fg=colour239,bg=colour237,noitalics]"
setw -g window-status-current-format "#[fg=colour239,bg=colour248,:nobold,nounderscore,noitalics]#[fg=colour239,bg=colour214] #I #[fg=colour239,bg=colour214,bold] #W #[fg=colour214,bg=colour237,nobold,nounderscore,noitalics]"
